#!/bin/bash

set -e

. ${INSTALLER_DIR}/wizard

OSFAMILY="$(wiz_fact osfamily)"

install_required_dependencies_for_apache2() {
	case "$OSFAMILY" in
		"debian")
			apt-get install -y --force-yes subversion libapache2-mod-perl2 libapache2-svn
			;;
		"redhat")
			yum install -y mod_dav_svn subversion mod_perl perl-Digest-SHA perl-HTTP-Message perl-libwww-perl
			;;
	esac
}

case "$(wiz_get "server/autoinstall")" in
	"skip")
		;;
	"install")
		case "$(wiz_get "server/variant")" in
			"apache2")
				install_required_dependencies_for_apache2
				;;
			*)
				echo "Unsupported server variant."
				;;
		esac
		;;
esac
